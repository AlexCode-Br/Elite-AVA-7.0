<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Elite AVA 7.0 | Painel de Estudos</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { 
                        sans: ['Inter', 'sans-serif'],
                        display: ['Space Grotesk', 'sans-serif']
                    },
                    colors: {
                        dark: { 900: '#050911', 800: '#0e1421', 700: '#172033' },
                        neon: { blue: '#00f3ff', purple: '#bc13fe', green: '#0aff60', gold: '#ffd700', red: '#ff2a6d' }
                    },
                    animation: {
                        'pulse-glow': 'pulseGlow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'level-up': 'levelUp 0.8s ease-out forwards',
                        'shake': 'shake 0.5s cubic-bezier(.36,.07,.19,.97) both',
                        'slide-up': 'slideUp 0.4s ease-out forwards',
                    },
                    keyframes: {
                        pulseGlow: { '0%, 100%': { opacity: '1', boxShadow: '0 0 20px rgba(188, 19, 254, 0.5)' }, '50%': { opacity: '.8', boxShadow: '0 0 10px rgba(188, 19, 254, 0.2)' } },
                        levelUp: { '0%': { transform: 'scale(0.5)', opacity: '0' }, '60%': { transform: 'scale(1.2)' }, '100%': { transform: 'scale(1)', opacity: '1' } },
                        shake: { '10%, 90%': { transform: 'translate3d(-1px, 0, 0)' }, '20%, 80%': { transform: 'translate3d(2px, 0, 0)' }, '30%, 50%, 70%': { transform: 'translate3d(-4px, 0, 0)' }, '40%, 60%': { transform: 'translate3d(4px, 0, 0)' } },
                        slideUp: { '0%': { transform: 'translateY(20px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } }
                    }
                }
            }
        }
    </script>

    <style>
        body { -webkit-font-smoothing: antialiased; overscroll-behavior-y: none; }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .dark ::-webkit-scrollbar-thumb { background: #374151; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .glass-panel { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(12px); border-right: 1px solid rgba(0,0,0,0.05); }
        .dark .glass-panel { background: rgba(14, 20, 33, 0.95); border-right: 1px solid rgba(255, 255, 255, 0.05); }
        .nav-item { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); border-radius: 12px; margin-bottom: 6px; }
        .nav-item.active { background: linear-gradient(90deg, rgba(59,130,246,0.1) 0%, rgba(59,130,246,0) 100%); border-left: 4px solid #2563eb; }
        .dark .nav-item.active { background: linear-gradient(90deg, rgba(188,19,254,0.2) 0%, rgba(188,19,254,0) 100%); border-left: 4px solid #bc13fe; }
        .custom-checkbox input:checked + div { background-color: #10b981; border-color: #10b981; transform: scale(1.1) rotate(3deg); box-shadow: 0 0 10px rgba(16, 185, 129, 0.4); }
        .hover-card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .hover-card:hover { transform: translateY(-3px); }
        .dark .hover-card:hover { box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5); border-color: rgba(188, 19, 254, 0.3); }
        .input-error { border-color: #ef4444 !important; animation: shake 0.5s; }
        .form-slide-enter { max-height: 0; opacity: 0; overflow: hidden; transition: all 0.4s ease-out; }
        .form-slide-enter.active { max-height: 200px; opacity: 1; }
        #main-sidebar { transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .sidebar-open { transform: translateX(0) !important; }
        .profile-tab { transition: all 0.2s; border-bottom: 2px solid transparent; color: #64748b; }
        .dark .profile-tab { color: #94a3b8; }
        .profile-tab.active { border-color: #2563eb; color: #2563eb; font-weight: 600; }
        .dark .profile-tab.active { border-color: #bc13fe; color: #bc13fe; }
        .theme-btn.active { background-color: rgba(59, 130, 246, 0.1); color: #2563eb; font-weight: 600; }
        .dark .theme-btn.active { background-color: rgba(188, 19, 254, 0.2); color: #bc13fe; }
    </style>
</head>

<body class="bg-slate-50 dark:bg-dark-900 text-slate-800 dark:text-slate-100 h-[100dvh] flex overflow-hidden transition-colors duration-300">

    <div id="login-overlay" class="fixed inset-0 z-[100] bg-dark-900 flex items-center justify-center p-4 transition-opacity duration-500 overflow-y-auto hidden">
        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <div class="absolute -top-20 -left-20 w-96 h-96 bg-blue-600/10 rounded-full blur-3xl animate-pulse"></div>
            <div class="absolute -bottom-20 -right-20 w-96 h-96 bg-neon-purple/10 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
            <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-5"></div>
        </div>

        <div class="bg-dark-800/80 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-[400px] p-8 text-center animate-slide-up relative border border-white/5 overflow-hidden ring-1 ring-white/10">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-neon-purple to-neon-red"></div>
            <div class="mb-8">
                <div class="w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-purple-500/20 ring-4 ring-white/5">
                    <svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                    </svg>
                </div>
                <h1 class="text-3xl font-display font-bold text-white tracking-tight">Elite AVA <span class="text-neon-purple">7.0</span></h1>
                <p class="text-slate-400 text-sm mt-2" id="auth-subtitle">Entre para continuar sua evolu√ß√£o</p>
            </div>

            <form id="auth-form" onsubmit="window.handleAuth(event)" class="space-y-5 text-left" novalidate>
                <div id="field-name-container" class="form-slide-enter">
                    <label class="text-xs text-slate-400 font-bold ml-1 mb-1 block uppercase tracking-wide">Nome Completo</label>
                    <div class="relative group">
                         <input type="text" id="auth-name" placeholder="Seu nome de guerreiro" class="w-full bg-dark-900/50 border border-slate-700 rounded-xl py-3 pl-10 pr-4 text-sm text-white placeholder-slate-600 focus:outline-none focus:border-neon-purple focus:ring-1 focus:ring-neon-purple transition-all">
                    </div>
                </div>
                <div>
                    <label class="text-xs text-slate-400 font-bold ml-1 mb-1 block uppercase tracking-wide">E-mail</label>
                    <div class="relative group">
                        <input type="email" id="auth-email" placeholder="seu@email.com" class="w-full bg-dark-900/50 border border-slate-700 rounded-xl py-3 pl-10 pr-4 text-sm text-white placeholder-slate-600 focus:outline-none focus:border-neon-blue focus:ring-1 focus:ring-neon-blue transition-all">
                    </div>
                    <p class="text-red-500 text-[10px] mt-1 hidden font-medium" id="error-email">E-mail inv√°lido</p>
                </div>
                <div>
                    <div class="flex justify-between items-center mb-1">
                        <label class="text-xs text-slate-400 font-bold ml-1 uppercase tracking-wide">Senha</label>
                    </div>
                    <div class="relative group">
                        <input type="password" id="auth-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="w-full bg-dark-900/50 border border-slate-700 rounded-xl py-3 pl-10 pr-10 text-sm text-white placeholder-slate-600 focus:outline-none focus:border-neon-purple focus:ring-1 focus:ring-neon-purple transition-all">
                    </div>
                    <p class="text-red-500 text-[10px] mt-1 hidden font-medium" id="error-password">Senha inv√°lida</p>
                </div>
                <button type="submit" id="auth-btn" class="w-full py-3.5 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-bold shadow-lg shadow-purple-900/20 transition-all flex items-center justify-center gap-2 border border-white/10 group">
                    <span>Entrar na Plataforma</span>
                </button>
            </form>

            <div class="mt-6 pt-6 border-t border-white/5">
                <p class="text-sm text-slate-400" id="auth-toggle-text">
                    N√£o tem uma conta? 
                    <button onclick="toggleAuthMode()" class="text-neon-purple font-bold hover:text-white transition-colors ml-1 focus:outline-none p-2">Cadastre-se</button>
                </p>
            </div>
             <div id="auth-global-error" class="mt-4 p-3 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400 text-xs font-medium hidden text-left flex items-start gap-2 animate-shake">
                <span id="global-error-text"></span>
            </div>
        </div>
    </div>

    <aside id="main-sidebar" class="glass-panel w-72 md:w-64 flex flex-col z-50 h-full fixed top-0 left-0 bg-white dark:bg-dark-800 border-r border-slate-200 dark:border-white/5 shadow-2xl md:shadow-none -translate-x-full md:translate-x-0 group transition-transform duration-300">
         <div class="p-6 flex items-center gap-3 font-display font-bold text-xl text-slate-900 dark:text-white border-b border-slate-100 dark:border-white/5 h-[80px]">
             <div class="w-8 h-8 rounded-xl bg-gradient-to-br from-blue-600 to-neon-purple flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-blue-500/20">E</div>
            <span id="logo-text">Elite AVA</span>
        </div>

        <nav class="flex-1 px-4 space-y-3 mt-6 overflow-y-auto" id="sidebar-nav-container">
            <div onclick="switchView('dashboard')" class="nav-item active flex items-center px-4 py-4 text-base font-semibold cursor-pointer text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-white/5 group">
                <svg class="w-6 h-6 mr-3 shrink-0 text-blue-600 group-hover:text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                </svg>
                <span class="nav-label">Dashboard</span>
            </div>
            
            <div onclick="switchView('schedule')" class="nav-item flex items-center px-4 py-4 text-base font-semibold cursor-pointer text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-white/5 group">
                <svg class="w-6 h-6 mr-3 shrink-0 text-slate-400 group-hover:text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                     <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                <span class="nav-label">Cronograma</span>
            </div>

            <div onclick="switchView('library')" class="nav-item flex items-center px-4 py-4 text-base font-semibold cursor-pointer text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-white/5 group">
                 <svg class="w-6 h-6 mr-3 shrink-0 text-slate-400 group-hover:text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                 </svg>
                 <span class="nav-label">Biblioteca</span>
            </div>

            <div onclick="switchView('edital')" class="nav-item flex items-center px-4 py-4 text-base font-semibold cursor-pointer text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-white/5 group">
                <svg class="w-6 h-6 mr-3 shrink-0 text-slate-400 group-hover:text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
                <span class="nav-label">IA T√°tica</span>
            </div>

            <div onclick="switchView('stats')" class="nav-item flex items-center px-4 py-4 text-base font-semibold cursor-pointer text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-white/5 group">
                <svg class="w-6 h-6 mr-3 shrink-0 text-slate-400 group-hover:text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                </svg>
                <span class="nav-label">Analytics</span>
            </div>

            <div onclick="switchView('achievements')" class="nav-item flex items-center px-4 py-4 text-base font-semibold cursor-pointer text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-white/5 group">
                <svg class="w-6 h-6 mr-3 shrink-0 text-slate-400 group-hover:text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714-2.143L13 3z"></path>
                </svg>
                <span class="nav-label">Conquistas</span>
            </div>
        </nav>
        
        <div class="p-4 border-t border-slate-200 dark:border-white/5">
             <div class="flex bg-slate-100 dark:bg-black/20 p-1 rounded-xl">
                <button onclick="setTheme('light')" id="theme-btn-light" class="theme-btn flex-1 p-2 rounded-lg text-lg">‚òÄÔ∏è</button>
                <button onclick="setTheme('dark')" id="theme-btn-dark" class="theme-btn flex-1 p-2 rounded-lg text-lg">üåô</button>
                <button onclick="setTheme('system')" id="theme-btn-system" class="theme-btn flex-1 p-2 rounded-lg text-lg">üíª</button>
            </div>
            <button onclick="handleLogout()" class="w-full flex items-center px-4 py-3 mt-3 text-sm font-semibold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl transition">
                <svg class="w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                </svg>
                <span class="nav-label">Sair</span>
            </button>
        </div>
    </aside>

    <main class="flex-1 flex flex-col h-[100dvh] overflow-hidden relative ml-0 md:ml-64 transition-all duration-300">
        <header class="h-16 md:h-20 px-4 md:px-8 bg-white/80 dark:bg-dark-900/90 backdrop-blur-md z-30 shrink-0 border-b border-slate-200 dark:border-white/5 flex items-center justify-between">
            <div class="flex items-center gap-3">
                 <button onclick="toggleSidebar()" class="md:hidden p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path></svg>
                 </button>
                 <div class="flex flex-col">
                    <h1 class="text-lg md:text-2xl font-display font-bold text-slate-900 dark:text-white leading-tight">Ol√°, <span id="header-name">Estudante</span></h1>
                    <span class="text-xs text-slate-500 dark:text-slate-400 hidden sm:block" id="header-date">Bem-vindo de volta</span>
                 </div>
            </div>
             <div class="flex items-center gap-3 md:gap-6">
                <div class="hidden md:flex items-center gap-2 px-3 py-1.5 bg-slate-100 dark:bg-white/5 rounded-lg border border-slate-200 dark:border-white/10">
                    <span class="relative flex h-2 w-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                    </span>
                    <span class="text-xs font-bold text-slate-600 dark:text-slate-300">Online</span>
                </div>
                <div class="w-px h-8 bg-slate-200 dark:bg-white/10 hidden md:block"></div>
                <span id="header-countdown" class="font-bold text-red-500 hidden sm:block bg-red-50 dark:bg-red-900/20 px-3 py-1 rounded-lg text-sm border border-red-200 dark:border-red-900/50">-- DIAS</span>
                <div class="w-10 h-10 bg-white dark:bg-dark-800 rounded-xl border-2 border-slate-200 dark:border-white/10 flex items-center justify-center font-bold cursor-pointer hover:border-blue-500 transition-colors shadow-sm" onclick="openProfileModal()" id="profile-avatar-char">E</div>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar bg-slate-50 dark:bg-dark-900 transition-colors" id="main-scroll">
            
            <div id="view-dashboard" class="w-full pb-20 space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                 
                 <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6">
                     <div class="bg-blue-500 p-4 rounded-2xl border border-blue-400 shadow-sm shadow-blue-500/20 text-white">
                        <div class="text-xs font-bold opacity-80 uppercase tracking-wider mb-1">N√≠vel</div>
                        <div class="text-2xl font-bold font-display" id="stat-level">-</div>
                     </div>
                     <div class="bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm">
                        <div class="text-xs font-bold opacity-70 uppercase tracking-wider mb-1 text-slate-500 dark:text-slate-400">XP Total</div>
                        <div class="text-2xl font-bold font-display text-slate-900 dark:text-white" id="stat-xp">-</div>
                     </div>
                     <div class="bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm">
                        <div class="text-xs font-bold opacity-70 uppercase tracking-wider mb-1 text-slate-500 dark:text-slate-400">Tarefas</div>
                        <div class="text-2xl font-bold font-display text-slate-900 dark:text-white" id="stat-completed">-</div>
                     </div>
                     <div class="bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm">
                        <div class="text-xs font-bold opacity-70 uppercase tracking-wider mb-1 text-slate-500 dark:text-slate-400">Streak</div>
                        <div class="text-2xl font-bold font-display text-slate-900 dark:text-white flex items-center gap-2">
                             <span id="streak-count">-</span> <span id="streak-fire" class="text-xl">üî•</span>
                        </div>
                     </div>
                 </div>

                 <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8">
                     <div class="lg:col-span-2 space-y-6 md:space-y-8">
                        <div class="bg-white dark:bg-dark-800 rounded-3xl p-6 md:p-8 border border-slate-100 dark:border-white/5 shadow-sm">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="font-display font-bold text-lg md:text-xl text-slate-800 dark:text-white">Frequ√™ncia</h3>
                                <div class="flex items-center gap-4">
                                    <button onclick="changeCalendarDate(-1)" class="p-2 hover:bg-slate-100 dark:hover:bg-white/5 rounded-full transition"><svg class="w-5 h-5 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>
                                    <span class="font-bold text-slate-700 dark:text-white w-24 text-center text-sm" id="calendar-header-label">...</span>
                                    <button onclick="changeCalendarDate(1)" class="p-2 hover:bg-slate-100 dark:hover:bg-white/5 rounded-full transition"><svg class="w-5 h-5 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button>
                                </div>
                            </div>
                            <div class="grid grid-cols-7 gap-2 md:gap-3 text-center mb-2">
                                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">D</span>
                                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">S</span>
                                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">T</span>
                                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Q</span>
                                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Q</span>
                                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">S</span>
                                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">S</span>
                            </div>
                            <div class="grid grid-cols-7 gap-2 md:gap-3" id="calendar-grid">
                                </div>
                        </div>

                        <div id="task-section">
                            <div class="flex items-end justify-between mb-4 px-2">
                                <div>
                                    <h3 class="font-display font-bold text-xl md:text-2xl text-slate-900 dark:text-white flex items-center gap-2">
                                        Miss√µes de Hoje
                                        <span class="text-xs font-bold px-2 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 rounded-md" id="selected-date-label">Hoje</span>
                                    </h3>
                                </div>
                                <div class="flex flex-col items-end">
                                    <span class="text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-1" id="daily-progress-text">0/0 Completas</span>
                                    <div class="w-24 h-1.5 bg-slate-200 dark:bg-white/10 rounded-full overflow-hidden">
                                        <div class="h-full bg-green-500 transition-all duration-500" style="width: 0%" id="daily-progress-bar"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="space-y-3" id="today-container">
                                </div>
                        </div>
                     </div>

                     <div class="space-y-6 md:space-y-8">
                        <div class="bg-gradient-to-br from-slate-900 to-slate-800 dark:from-white/5 dark:to-white/5 rounded-3xl p-6 md:p-8 text-white relative overflow-hidden group border border-slate-800 dark:border-white/5 shadow-xl">
                            <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity"><svg class="w-24 h-24" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2a10 10 0 1010 10A10 10 0 0012 2zm1 15h-2v-6h2zm0-8h-2V7h2z"></path></svg></div>
                            <div class="relative z-10">
                                <h4 class="font-bold text-blue-200 text-xs uppercase tracking-widest mb-2 flex items-center gap-2">
                                    <span class="w-2 h-2 rounded-full bg-blue-400 animate-pulse"></span>
                                    Intelig√™ncia T√°tica
                                </h4>
                                <div class="min-h-[120px]">
                                    <div id="daily-briefing-loading" class="hidden text-center text-xs text-blue-300 animate-pulse mt-4">Analisando dados...</div>
                                    <div id="daily-briefing-content" class="text-sm text-slate-300 leading-relaxed">
                                        <span id="intel-date" class="hidden"></span>
                                        </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-dark-800 rounded-3xl p-6 border border-slate-100 dark:border-white/5 shadow-sm">
                            <h4 class="font-bold text-slate-800 dark:text-white text-sm mb-4 text-center">Progresso do Edital</h4>
                            <div class="relative w-48 h-48 mx-auto">
                                 <svg class="w-full h-full transform -rotate-90"><circle cx="96" cy="96" r="80" stroke="currentColor" stroke-width="12" fill="transparent" class="text-slate-100 dark:text-white/5" /><circle id="dash-circle-progress" cx="96" cy="96" r="80" stroke="currentColor" stroke-width="12" fill="transparent" stroke-dasharray="502.6" stroke-dashoffset="502.6" class="text-blue-500 transition-all duration-1000 ease-out" style="stroke-linecap: round;" /></svg>
                                 <div class="absolute inset-0 flex flex-col items-center justify-center">
                                     <span class="text-4xl font-bold text-slate-800 dark:text-white" id="dash-percent-text">0%</span>
                                     <span class="text-xs text-slate-400 mt-1">CONCLU√çDO</span>
                                 </div>
                            </div>
                            <p class="text-xs text-slate-400 mt-6 text-center"><span id="dash-completed-count" class="font-bold text-slate-700 dark:text-white">0</span> miss√µes cumpridas</p>
                        </div>
                     </div>
                 </div>
            </div>

            <div id="view-library" class="hidden w-full pb-20 animate-in fade-in slide-in-from-bottom-4 duration-500">
                 <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                    <h2 class="text-2xl font-bold text-slate-800 dark:text-white">Biblioteca</h2>
                    <div class="flex gap-2 w-full md:w-auto">
                        <select id="library-filter-select" onchange="setLibraryFilter(this.value)" class="bg-white dark:bg-dark-800 border border-slate-200 dark:border-white/10 rounded-xl px-4 py-3 text-sm font-bold text-slate-700 dark:text-slate-300 focus:outline-none focus:border-blue-500"></select>
                        <input type="text" id="search-input" onkeyup="searchContent()" placeholder="Buscar t√≥pico..." class="bg-white dark:bg-dark-800 border border-slate-200 dark:border-white/10 rounded-xl px-4 py-3 text-sm text-slate-700 dark:text-white focus:outline-none focus:border-blue-500 w-full md:w-64">
                    </div>
                 </div>
                 <div id="library-results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
            </div>

            <div id="view-schedule" class="hidden w-full pb-20 animate-in fade-in slide-in-from-bottom-4 duration-500">
                 <h2 class="text-2xl font-bold text-slate-800 dark:text-white mb-6">Jornada Completa</h2>
                 <div id="full-schedule-container" class="space-y-0"></div>
            </div>

            <div id="view-stats" class="hidden w-full pb-20 animate-in fade-in slide-in-from-bottom-4 duration-500">
                 <h2 class="text-2xl font-bold text-slate-800 dark:text-white mb-6">Estat√≠sticas Detalhadas</h2>
                 <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                      <div class="bg-white dark:bg-dark-800 p-6 rounded-3xl border border-slate-100 dark:border-white/5">
                           <h4 class="font-bold text-slate-700 dark:text-white mb-4">Radar de Compet√™ncias</h4>
                           <div class="h-64 relative w-full"><canvas id="subjectChart"></canvas></div>
                      </div>
                      <div class="bg-white dark:bg-dark-800 p-6 rounded-3xl border border-slate-100 dark:border-white/5">
                           <h4 class="font-bold text-slate-700 dark:text-white mb-4">Horas de Estudo (Estimado)</h4>
                           <div class="flex items-center justify-center h-64 flex-col">
                               <span class="text-5xl font-bold text-blue-600 dark:text-blue-500" id="stat-hours">0h</span>
                               <span class="text-sm text-slate-500 mt-2">Baseado nas tarefas cumpridas</span>
                           </div>
                      </div>
                 </div>
            </div>

            <div id="view-achievements" class="hidden w-full pb-20 animate-in fade-in slide-in-from-bottom-4 duration-500">
                 <h2 class="text-2xl font-bold text-slate-800 dark:text-white mb-6">Sala de Trof√©us</h2>
                 <div id="achievements-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
            </div>

            <div id="view-edital" class="hidden w-full h-[calc(100vh-140px)] animate-in fade-in slide-in-from-bottom-4 duration-500">
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-6 h-full">
                    <div class="bg-slate-800 rounded-3xl overflow-hidden shadow-lg flex flex-col border border-white/5">
                        <div class="bg-slate-900 p-3 flex justify-between items-center border-b border-white/5">
                            <span class="text-xs font-bold text-slate-400 uppercase">Edital Verticalizado.pdf</span>
                            <button onclick="toggleFullscreenPDF()" class="text-xs font-bold text-blue-400 hover:text-white px-3 py-1 rounded bg-white/5 hover:bg-white/10 transition">Expandir</button>
                        </div>
                        <iframe id="pdf-frame" src="edital.pdf" class="flex-1 w-full h-full bg-slate-100 border-none"></iframe>
                    </div>
                    <div class="bg-white dark:bg-dark-800 rounded-3xl border border-slate-100 dark:border-white/5 shadow-lg flex flex-col overflow-hidden">
                        <div class="p-4 border-b border-slate-100 dark:border-white/5 bg-slate-50 dark:bg-dark-900/50 flex justify-between items-center">
                            <h3 class="font-bold text-slate-800 dark:text-white flex items-center gap-2">
                                <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> IA T√°tica
                            </h3>
                            <span class="text-[10px] text-slate-400 uppercase font-bold tracking-widest">Gemini 2.5</span>
                        </div>
                        <div id="chat-container" class="flex-1 p-4 overflow-y-auto space-y-4">
                             <div class="flex items-start gap-3">
                                 <div class="w-8 h-8 rounded-lg bg-blue-600 flex items-center justify-center text-white text-xs font-bold shrink-0">IA</div>
                                 <div class="bg-slate-100 dark:bg-white/5 p-3 rounded-2xl rounded-tl-none text-sm text-slate-700 dark:text-slate-300">
                                     Ol√°! Sou seu assistente t√°tico. Posso analisar o edital ou criar resumos das mat√©rias. O que vamos estudar hoje?
                                 </div>
                             </div>
                        </div>
                        <form onsubmit="handleChat(event)" class="p-4 border-t border-slate-100 dark:border-white/5 bg-slate-50 dark:bg-dark-900/50 flex gap-2">
                            <input id="chat-input" type="text" placeholder="Pergunte sobre o edital..." class="flex-1 bg-white dark:bg-dark-900 border border-slate-200 dark:border-white/10 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 text-slate-800 dark:text-white transition-all">
                            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white rounded-xl px-6 py-2 font-bold transition-colors shadow-lg shadow-blue-600/20">Enviar</button>
                        </form>
                    </div>
                 </div>
            </div>

        </div>
    </main>

    <div id="content-modal" class="fixed inset-0 z-[150] hidden flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm transition-all duration-300">
        <div class="bg-white dark:bg-dark-800 w-full max-w-2xl rounded-3xl shadow-2xl border dark:border-white/10 flex flex-col max-h-[90vh] animate-slide-up">
            <div class="p-6 border-b border-slate-100 dark:border-white/5 flex justify-between items-start">
                <div>
                    <span id="modal-tag" class="text-[10px] font-bold uppercase bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 px-2 py-1 rounded">Mat√©ria</span> 
                    <h3 id="modal-title" class="text-xl font-bold text-slate-900 dark:text-white mt-2 leading-tight">Titulo do T√≥pico</h3>
                </div>
                <button onclick="document.getElementById('content-modal').classList.add('hidden')" class="text-slate-400 hover:text-red-500 p-2"><svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
            </div>
            <div class="p-6 overflow-y-auto custom-scrollbar">
                 <p id="modal-body" class="text-slate-600 dark:text-slate-300 mb-6 leading-relaxed">Descri√ß√£o...</p>
                 <div id="quiz-box" class="hidden border-t border-slate-100 dark:border-white/5 pt-6 mt-6">
                     <h4 class="font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2">üß† Resumo Inteligente & Quest√µes</h4>
                     <div id="quiz-content" class="prose prose-sm dark:prose-invert max-w-none"></div>
                 </div>
            </div>
            <div class="p-4 border-t border-slate-100 dark:border-white/5 bg-slate-50 dark:bg-dark-900/50 rounded-b-3xl">
                <button onclick="generateQuiz()" id="btn-quiz" class="w-full py-3.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold rounded-xl shadow-lg shadow-blue-600/20 transition-all">
                    ‚ú® Gerar Resumo & Quiz com IA
                </button>
            </div>
        </div>
    </div>

    <div id="pdf-modal" class="fixed inset-0 z-[200] hidden bg-dark-900 flex flex-col animate-in fade-in duration-200">
        <div class="p-4 bg-dark-800 flex justify-between items-center border-b border-white/5">
            <h3 class="text-white font-bold flex items-center gap-2"><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> Modo Leitura Imersiva</h3> 
            <button onclick="toggleFullscreenPDF()" class="text-white bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg font-bold transition">Fechar</button>
        </div>
        <iframe id="pdf-frame-fullscreen" class="flex-1 w-full border-none" src="edital.pdf"></iframe>
    </div>

    <div id="achievement-toast" class="fixed top-24 right-4 z-[150] translate-x-full transition-transform duration-500 bg-white dark:bg-dark-800 border border-yellow-400/50 p-4 rounded-xl shadow-2xl flex gap-4 max-w-sm">
         <div class="text-3xl shrink-0 animate-bounce">üèÜ</div>
         <div>
             <h4 class="text-xs font-bold text-yellow-600 uppercase tracking-wider mb-1">Nova Conquista Desbloqueada!</h4>
             <p id="toast-title" class="text-sm font-bold text-slate-800 dark:text-white">Mestre da Const√¢ncia</p>
         </div>
    </div>
    
    <div id="profile-modal" class="fixed inset-0 z-[180] hidden flex items-center justify-center bg-black/80 backdrop-blur-md p-4 transition-all">
         <div class="bg-white dark:bg-dark-900 w-full max-w-lg rounded-3xl shadow-2xl border dark:border-white/10 flex flex-col h-[85vh] animate-slide-up">
             <div class="p-4 border-b border-slate-100 dark:border-white/5 flex justify-between items-center">
                 <h3 class="font-bold text-lg dark:text-white">Perfil do Candidato</h3>
                 <button onclick="document.getElementById('profile-modal').classList.add('hidden')" class="text-slate-400 hover:text-white w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white/10 transition">‚úï</button>
             </div>
             <div class="p-6 overflow-y-auto flex-1 custom-scrollbar">
                 <div class="text-center mb-8">
                     <div class="w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mx-auto flex items-center justify-center text-white text-3xl font-bold mb-4 shadow-lg shadow-purple-500/30 border-4 border-white dark:border-dark-800" id="profile-avatar-char-modal">E</div>
                     <h3 id="profile-name-display" class="font-bold text-2xl dark:text-white">Estudante</h3>
                     <p id="profile-email-display" class="text-sm text-slate-500 dark:text-slate-400">usuario@email.com</p>
                 </div>
                 
                 <div class="flex border-b border-slate-200 dark:border-white/5 mb-6">
                      <button id="tab-btn-personal" onclick="ModalsUI.switchProfileTab('personal')" class="profile-tab active flex-1 pb-3 text-center text-sm font-bold uppercase tracking-wide">Dados Pessoais</button>
                      <button id="tab-btn-journey" onclick="ModalsUI.switchProfileTab('journey')" class="profile-tab flex-1 pb-3 text-center text-sm font-bold uppercase tracking-wide">Jornada</button>
                 </div>
                 
                 <div id="tab-content-personal" class="space-y-4">
                      <div>
                          <label class="text-xs font-bold text-slate-500 uppercase mb-1 block">Nome de Exibi√ß√£o</label>
                          <input id="edit-profile-name" type="text" class="w-full p-3 rounded-xl bg-slate-100 dark:bg-dark-800 border border-slate-200 dark:border-white/10 dark:text-white focus:border-blue-500 focus:outline-none transition-colors">
                      </div>
                      <div>
                          <label class="text-xs font-bold text-slate-500 uppercase mb-1 block">Email (Vinculado)</label>
                          <input id="edit-profile-email" type="text" disabled class="w-full p-3 rounded-xl bg-slate-100 dark:bg-dark-800 border border-slate-200 dark:border-white/5 dark:text-slate-500 cursor-not-allowed opacity-60">
                      </div>
                      <button onclick="saveProfileName()" class="w-full py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold transition shadow-lg shadow-blue-500/20 mt-4">Salvar Altera√ß√µes</button>
                 </div>
                 
                 <div id="tab-content-journey" class="hidden">
                      <h4 class="text-xs font-bold text-slate-500 uppercase mb-4">Pr√≥ximos N√≠veis</h4>
                      <div id="profile-next-levels" class="pl-4 border-l border-slate-200 dark:border-white/5 space-y-6">
                          </div>
                 </div>
             </div>
             <div class="p-4 border-t border-slate-100 dark:border-white/5 bg-slate-50 dark:bg-dark-900/50 rounded-b-3xl">
                 <button onclick="handleLogout()" class="w-full py-3 bg-red-500/10 hover:bg-red-500/20 text-red-500 rounded-xl font-bold transition border border-red-500/20">Desconectar</button>
             </div>
         </div>
    </div>
    
    <div id="level-up-modal" class="fixed inset-0 z-[200] hidden flex items-center justify-center bg-black/90 backdrop-blur-md p-4">
         <div class="bg-white dark:bg-dark-800 p-8 rounded-3xl text-center animate-level-up max-w-sm w-full border border-yellow-500/30 shadow-[0_0_50px_rgba(255,215,0,0.2)]">
             <div class="text-6xl mb-6 animate-bounce">üéì</div>
             <h2 class="text-3xl font-bold dark:text-white mb-2 bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent">NOVO N√çVEL!</h2>
             <p class="text-slate-400 mb-6">Voc√™ alcan√ßou uma nova patente de conhecimento.</p>
             <button onclick="document.getElementById('level-up-modal').classList.add('hidden')" class="w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-600 text-white rounded-xl font-bold shadow-lg shadow-orange-500/30 hover:scale-105 transition-transform">Continuar Estudando</button>
         </div>
    </div>

    <script type="module" src="../src/app.js"></script>
    
</body>
</html>